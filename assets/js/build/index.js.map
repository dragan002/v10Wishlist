{"version":3,"file":"index.js","mappings":"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","sources":["webpack://wishlist-simple-assets/./assets/js/src/react/components/WishlistCounter.jsx","webpack://wishlist-simple-assets/external window [\"wp\",\"element\"]","webpack://wishlist-simple-assets/external window \"React\"","webpack://wishlist-simple-assets/webpack/bootstrap","webpack://wishlist-simple-assets/webpack/runtime/compat get default export","webpack://wishlist-simple-assets/webpack/runtime/define property getters","webpack://wishlist-simple-assets/webpack/runtime/hasOwnProperty shorthand","webpack://wishlist-simple-assets/webpack/runtime/make namespace object","webpack://wishlist-simple-assets/./assets/js/src/react/index.js"],"sourcesContent":["import { useState, useEffect } from '@wordpress/element';\r\n\r\nconst WishlistCounter = () => {\r\n  const [count, setCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    // Initial count fetch\r\n    fetchWishlistCount();\r\n\r\n    // Listen for wishlist updates\r\n    document.addEventListener('wpls_wishlist_updated', fetchWishlistCount);\r\n    return () => document.removeEventListener('wpls_wishlist_updated', fetchWishlistCount);\r\n  }, []);\r\n\r\n  const fetchWishlistCount = async () => {\r\n    try {\r\n      // Ensure wpls_data and wpls_data.ajax_url are available\r\n      if (typeof wpls_data === 'undefined' || typeof wpls_data.ajax_url === 'undefined') {\r\n        console.error('wpls_data or wpls_data.ajax_url is not defined.');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch(wpls_data.ajax_url, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n        body: new URLSearchParams({\r\n          action: 'wpls_get_wishlist_count',\r\n          nonce: wpls_data.nonce // Ensure wpls_data.nonce is available\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setCount(data.data.count);\r\n      } else {\r\n        console.error('Failed to fetch wishlist count:', data.data ? data.data.message : 'Unknown error');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching wishlist count:', error);\r\n    }\r\n  };\r\n\r\n  if (count === 0 && wpls_data.show_zero_count !== 'yes') { // Assuming you might add this option later\r\n    return null;\r\n  }\r\n\r\n\r\n  return (\r\n    <a href={wpls_data.wishlist_url || '#'} className=\"wpls-wishlist-counter\">\r\n      <span className=\"wishlist-icon\">â™¥</span> {/* You can replace this with an SVG or icon font */}\r\n      <span className=\"count\">{count}</span>\r\n    </a>\r\n  );\r\n};\r\n\r\nexport default WishlistCounter;","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"React\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { render } from '@wordpress/element';\r\nimport WishlistCounter from './components/WishlistCounter';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  // Define an array of potential selectors for the mount point\r\n  const mountPointSelectors = [\r\n    '.site-header-cart', // Common WooCommerce selector\r\n    '.header-cart-wrapper', // Another common one\r\n    '.site-header .secondary-navigation ul', // Storefront theme secondary nav\r\n    '#site-header-menu #primary-menu-list', // Twenty Twenty-One/Two/Three primary menu\r\n    '#site-navigation .menu-main-menu-container > ul', // Generic primary menu\r\n    '#primary-navigation > div > ul', // Another generic primary menu pattern\r\n    'header[role=\"banner\"] .nav-wrapper > ul', // Common header pattern\r\n    'header .main-navigation ul', // Another common navigation pattern\r\n    // Add more selectors if needed for common themes\r\n  ];\r\n\r\n  let mountPoint = null;\r\n  for (const selector of mountPointSelectors) {\r\n    mountPoint = document.querySelector(selector);\r\n    if (mountPoint) {\r\n      break; // Found a suitable mount point\r\n    }\r\n  }\r\n\r\n  // If no specific mount point is found, try to append to the site header as a fallback\r\n  if (!mountPoint) {\r\n    mountPoint = document.querySelector('.site-header') || document.querySelector('header[role=\"banner\"]');\r\n  }\r\n\r\n  // Final fallback: body, if absolutely nothing else is found (less ideal)\r\n  if (!mountPoint) {\r\n    console.warn('Wishlist Counter: Could not find a suitable mount point in the header or navigation. The counter might not be visible.');\r\n    return; // Don't render if no good spot is found\r\n  }\r\n\r\n  const container = document.createElement('div');\r\n  container.className = 'wpls-wishlist-counter-container'; // For potential styling\r\n\r\n  // Try to prepend or append intelligently if it's a list\r\n  if (mountPoint.tagName === 'UL') {\r\n    const listItem = document.createElement('li');\r\n    listItem.className = 'menu-item wpls-wishlist-counter-menu-item'; // So it looks like a menu item\r\n    listItem.appendChild(container);\r\n    mountPoint.appendChild(listItem); // Append as a new menu item\r\n  } else {\r\n    // For other elements, append directly (e.g., inside a header div)\r\n    mountPoint.appendChild(container);\r\n  }\r\n\r\n  render(<WishlistCounter />, container);\r\n});"],"names":["useState","useEffect","WishlistCounter","count","setCount","fetchWishlistCount","document","addEventListener","removeEventListener","wpls_data","ajax_url","console","error","response","fetch","method","headers","body","URLSearchParams","action","nonce","ok","Error","status","data","json","success","message","show_zero_count","createElement","href","wishlist_url","className","render","mountPointSelectors","mountPoint","selector","querySelector","warn","container","tagName","listItem","appendChild"],"sourceRoot":""}